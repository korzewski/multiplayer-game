{"version":3,"sources":["js/node_modules/browserify/node_modules/browser-pack/_prelude.js","source/js/app.js","source/js/classes/Level1.js","source/js/classes/Manager.js","source/js/classes/PeerPlayer.js","source/js/classes/Player.js"],"names":[],"mappings":"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","file":"js/app.js","sourceRoot":"/source/","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","import Level1 from './classes/Level1'\r\nimport Manager from './classes/Manager';\r\n\r\nclass Init extends Phaser.Game {\r\n    constructor() {\r\n        super(GLOBAL.width, GLOBAL.height, Phaser.AUTO, 'game');\r\n        this.state.add('Boot', Boot, false);\r\n        this.state.add('Preloader', Preloader, false);\r\n        this.state.add('Level1', Level1, false);\r\n        this.state.start('Boot');\r\n    }\r\n}\r\n\r\nclass Boot extends Phaser.State {\r\n    create() {\r\n        this.input.maxPointers = 1;\r\n        this.stage.disableVisibilityChange = true;\r\n\r\n        if (this.game.device.desktop) {\r\n            this.scale.pageAlignHorizontally = true;\r\n            this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\r\n            this.scale.maxWidth = 700;\r\n            this.scale.maxHeight = 700;\r\n        } else {\r\n            // mobile settings\r\n            this.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\r\n            this.scale.minWidth = 480;\r\n            this.scale.minHeight = 260;\r\n            this.scale.maxWidth = 1024;\r\n            this.scale.maxHeight = 768;\r\n            this.scale.forceLandscape = true;\r\n            this.scale.pageAlignHorizontally = true;\r\n            this.scale.refresh();\r\n        }\r\n\r\n        this.game.state.start('Preloader', true, false);\r\n    }\r\n}\r\n\r\nclass Preloader extends Phaser.State{\r\n    preload() {\r\n        this.game.load.tilemap('level1', 'extra/maps/level1.json', null, Phaser.Tilemap.TILED_JSON);\r\n        this.game.load.image('level1-tiles', 'extra/maps/level1-tiles.png');\r\n        this.game.load.image('player', 'extra/img/player.png');\r\n        this.game.load.image('coin', 'extra/img/coin.png');\r\n        this.game.load.image('bullet-1', 'extra/img/bullet-1.png');\r\n        this.game.load.image('bullet-2', 'extra/img/bullet-2.png');\r\n    }\r\n\r\n    create(){\r\n        GLOBAL.game = this.game;\r\n        GLOBAL.manager = new Manager();\r\n        this.game.state.start('Level1');\r\n    }\r\n\r\n}\r\n\r\nnew Init();","import Player from './Player';\r\nimport PeerPlayer from './PeerPlayer';\r\n\r\nexport default class Level1 extends Phaser.State{\r\n    create(){\r\n        this.game.physics.startSystem(Phaser.Physics.ARCADE);\r\n\r\n        this.map = this.game.add.tilemap('level1');\r\n        this.map.addTilesetImage('simples_pimples', 'level1-tiles');\r\n        this.blockedLayer = this.map.createLayer('blocked');\r\n        this.blockedLayer.resizeWorld();\r\n        this.map.setCollisionBetween(1, 10000, true, 'blocked');\r\n\r\n        this.coins = this.game.add.group();\r\n        this.coins.enableBody = true;\r\n        this.map.createFromObjects('money', 'mm', 'coin', 0, true, false, this.coins);\r\n\r\n        this.player = new Player(this.game, 80, 100, 'player', this.blockedLayer);\r\n        this.game.camera.follow(this.player);\r\n\r\n        this.connectedPlayers = {};\r\n\r\n        this.scores = 0;\r\n        this.textStyle = { font: \"bold 16px Arial\", fill: \"#fff\", boundsAlignH: 'right', align: 'right'};\r\n        this.scoresLabel = this.game.add.text(0, 0, 'scores: 0', this.textStyle);\r\n        this.scoresLabel.fixedToCamera = true;\r\n        this.scoresLabel.cameraOffset.setTo(10, 10);\r\n\r\n        this.healthLabel = this.game.add.text(0, 0, 'health: ' + this.player.health, this.textStyle);\r\n        this.healthLabel.fixedToCamera = true;\r\n        this.healthLabel.cameraOffset.setTo(10, 30);\r\n\r\n        this.killsLabel = this.game.add.text(0, 0, 'kills: ' + this.player.kills, this.textStyle);\r\n        this.killsLabel.fixedToCamera = true;\r\n        this.killsLabel.cameraOffset.setTo(10, 50);\r\n\r\n        this.game.events.onUserConnected.add(this.onUserConnected, this);\r\n        this.game.events.onUserDataUpdate.add(this.onUserDataUpdate, this);\r\n        this.game.events.onUserDisconnected.add(this.onUserDisconnected, this);\r\n    }\r\n\r\n    onUserConnected(conn){\r\n        if(conn.peer != GLOBAL.manager.nickname){\r\n            this.connectedPlayers[conn.peer] = new PeerPlayer(this.game, 80, 100, 'player', conn, this.blockedLayer);\r\n        }\r\n    }\r\n\r\n    onUserDisconnected(userName){\r\n        this.connectedPlayers[userName].destroy();\r\n        delete this.connectedPlayers[userName];\r\n    }\r\n\r\n    onUserDataUpdate(peerName, data){\r\n        if(data.type == 'position'){\r\n            this.connectedPlayers[peerName].updatePosition(data);\r\n        } else if(data.type == 'shoot'){\r\n            this.connectedPlayers[peerName].shoot(data);\r\n        } else if(data.type == 'damage'){\r\n            this.player.addDamage(data, this.connectedPlayers[peerName]);\r\n            this.healthLabel.text = 'health: ' + this.player.health;\r\n        } else if(data.type == 'kill'){\r\n            this.player.addKill();\r\n            this.addPoints(100);\r\n            this.killsLabel.text = 'kills: ' + this.player.kills;\r\n        }\r\n    }\r\n\r\n    update(){\r\n        this.game.physics.arcade.collide(this.player, this.blockedLayer);\r\n        this.game.physics.arcade.overlap(this.player, this.coins, this.collectCoin, null, this);\r\n\r\n        for(let connectedPlayer in this.connectedPlayers){\r\n            this.game.physics.arcade.overlap(this.connectedPlayers[connectedPlayer], this.player.bullets, (connPlayer, bullet) => {\r\n                GLOBAL.manager.sendSingleData(connPlayer.peer, {\r\n                    type: 'damage',\r\n                    damage: this.player.maxDamage\r\n                });\r\n                bullet.kill();\r\n            });\r\n\r\n            this.game.physics.arcade.overlap(this.connectedPlayers[connectedPlayer].bullets, this.player, (connPlayer, bullet) => {\r\n                bullet.kill();\r\n            });\r\n\r\n            for(let connectedPlayer2 in this.connectedPlayers){\r\n                if(connectedPlayer != connectedPlayer2){\r\n                    this.game.physics.arcade.overlap(this.connectedPlayers[connectedPlayer].bullets, this.connectedPlayers[connectedPlayer2], (connectedPlayer, bullet) => {\r\n                        bullet.kill();\r\n                    });\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    collectCoin(player, coin){\r\n        coin.kill();\r\n        this.addPoints(10);\r\n    }\r\n\r\n    addPoints(value){\r\n        this.scores += value;\r\n        this.scoresLabel.text = 'scores: ' + this.scores;\r\n    }\r\n\r\n    render() {\r\n        //this.game.debug.text('Active Bullets: ' + this.player.bullets.countLiving() + ' / ' + this.player.bullets.total, 10, 45);\r\n        //this.game.debug.cameraInfo(this.game.camera, 32, 32);\r\n        //this.game.debug.spriteCoords(this.player, 32, 500);\r\n    }\r\n}","export default class Manager{\r\n    constructor(){\r\n        if (!GLOBAL.game.events) GLOBAL.game.events = {};\r\n        GLOBAL.game.events.onUserConnected = new Phaser.Signal();\r\n        GLOBAL.game.events.onUserDisconnected = new Phaser.Signal();\r\n        GLOBAL.game.events.onUserDataUpdate = new Phaser.Signal();\r\n\r\n        this.connectedPeers = [];\r\n\r\n        var socket = io();\r\n        socket.on('env', (env, port, allConnectedPeers) => {\r\n            console.log('env: ', env);\r\n            console.log('port: ', port);\r\n            console.log('allConnectedPeers: ', allConnectedPeers);\r\n\r\n            if (env === 'production'){\r\n                this.peer = new Peer({\r\n                    host:'/',\r\n                    secure:true,\r\n                    port:443,\r\n                    key: 'peerjs',\r\n                    path: '/api',\r\n                    config: {\r\n                        'iceServers': [{ url: 'stun:stun.l.google.com:19302' }]\r\n                    }\r\n                });\r\n            } else {\r\n                this.peer = new Peer({host: '/', port: port, path: '/api'});\r\n                console.log('peer: ', this.peer);\r\n            }\r\n\r\n            this.peerID = this.peer.peer;\r\n            allConnectedPeers.forEach((peerObject) => {\r\n                this.connectWithNewPeer(peerObject.peerID);\r\n            });\r\n\r\n            this.peer.on('connection', (conn) => {\r\n                conn.on('open', () => {\r\n                    conn.on('data', (data) => {\r\n                        if(conn.peer != this.nickname){\r\n                            GLOBAL.game.events.onUserDataUpdate.dispatch(conn.peer, data);\r\n                        }\r\n                    });\r\n                });\r\n            });\r\n        });\r\n\r\n        socket.on('user-connected', (newUser) => {\r\n            console.log('user-connected: ', newUser);\r\n            this.connectWithNewPeer(newUser);\r\n        });\r\n\r\n        socket.on('user-disconnected', (disconnectedUser) => {\r\n            console.log('user-disconnected: ', disconnectedUser);\r\n            GLOBAL.game.events.onUserDisconnected.dispatch(disconnectedUser);\r\n        });\r\n    }\r\n\r\n    connectWithNewPeer(newUser){\r\n        if(newUser != this.peerID){\r\n            let conn = this.peer.connect(newUser);\r\n            conn.on('open', () => {\r\n                this.connectedPeers.push( conn );\r\n                GLOBAL.game.events.onUserConnected.dispatch(conn);\r\n            });\r\n        }\r\n    }\r\n\r\n    broadcast(data){\r\n        this.connectedPeers.forEach((peer, index) => {\r\n            peer.send(data);\r\n        });\r\n    }\r\n\r\n    sendSingleData(peer, data){\r\n        peer.send(data);\r\n    }\r\n}","export default class PeerPlayer extends Phaser.Sprite{\r\n    constructor(game, posX, posY, spriteName, peer, blockedLayer) {\r\n        super(game, posX, posY, spriteName);\r\n\r\n        this.peer = peer;\r\n\r\n        this.game.physics.arcade.enable(this);\r\n        this.anchor.setTo(0.5, 0.5);\r\n        this.game.add.existing(this);\r\n\r\n        this.blockedLayer = blockedLayer;\r\n\r\n        this.bullets = this.game.add.physicsGroup(Phaser.Physics.ARCADE);\r\n        this.bullets.createMultiple(5, 'bullet-2');\r\n        this.bullets.forEach((bullet) => {\r\n            bullet.anchor.setTo(0.5);\r\n            bullet.scale.setTo(0.9);\r\n            bullet.smoothed = false;\r\n            bullet.checkWorldBounds = true;\r\n            bullet.outOfBoundsKill = true;\r\n        });\r\n    }\r\n\r\n    updatePosition(data){\r\n        if(data.posX > this.position.x){\r\n            this.scale.x = -1;\r\n        } else {\r\n            this.scale.x = 1;\r\n        }\r\n\r\n        this.position.x = data.posX;\r\n        this.position.y = data.posY;\r\n    }\r\n\r\n    shoot(data){\r\n        let dataPoint = new Phaser.Point(data.bullet.x, data.bullet.y);\r\n\r\n        let bullet = this.bullets.getFirstDead();\r\n        bullet.reset(dataPoint.x, dataPoint.y);\r\n\r\n        let newPoint =  Phaser.Point.rotate(new Phaser.Point(dataPoint.x + 10, dataPoint.y), dataPoint.x, dataPoint.y, data.bullet.angleDeg, true);\r\n        this.game.physics.arcade.moveToXY(bullet, newPoint.x, newPoint.y, data.bullet.speed);\r\n    }\r\n\r\n    getNickname(){\r\n        return this.peer.peer;\r\n    }\r\n\r\n    update(){\r\n        this.game.physics.arcade.collide(this.bullets, this.blockedLayer, (bullet) => {\r\n            bullet.kill();\r\n        });\r\n    }\r\n\r\n}","export default class Player extends Phaser.Sprite{\r\n    constructor(game, posX, posY, spriteName, blockedLayer){\r\n        super(game, posX, posY, spriteName);\r\n        this.game.physics.arcade.enable(this);\r\n        this.body.collideWorldBounds = true;\r\n\r\n        this.blockedLayer = blockedLayer;\r\n\r\n        this.health = 100;\r\n        this.maxDamage = 10;\r\n        this.kills = 0;\r\n\r\n        this.speed = 100;\r\n        this.fireRate = 100;\r\n        this.nextFire = 0;\r\n        this.bulletSpeed = 200;\r\n\r\n        this.cursors = this.game.input.keyboard.createCursorKeys();\r\n        this.cursorsWSAD = {\r\n            up: this.game.input.keyboard.addKey(Phaser.Keyboard.W),\r\n            down: this.game.input.keyboard.addKey(Phaser.Keyboard.S),\r\n            left: this.game.input.keyboard.addKey(Phaser.Keyboard.A),\r\n            right: this.game.input.keyboard.addKey(Phaser.Keyboard.D),\r\n        };\r\n        this.game.input.onDown.add(this.fire, this);\r\n\r\n        this.bullets = this.game.add.physicsGroup(Phaser.Physics.ARCADE);\r\n        this.bullets.createMultiple(10, 'bullet-1');\r\n        this.bullets.forEach((bullet) => {\r\n            bullet.anchor.setTo(0.5);\r\n            bullet.scale.setTo(0.9);\r\n            bullet.smoothed = false;\r\n            bullet.checkWorldBounds = true;\r\n            bullet.outOfBoundsKill = true;\r\n        });\r\n\r\n        this.lastOnlinePosition = new Phaser.Point(this.x, this.y);\r\n\r\n        this.anchor.setTo(0.5, 0.5);\r\n        this.smoothed = false;\r\n        this.game.add.existing(this);\r\n    }\r\n\r\n    fire(){\r\n        if(this.game.time.now > this.nextFire && this.bullets.countDead() > 0){\r\n            this.nextFire = this.game.time.now + this.fireRate;\r\n\r\n            let bullet = this.bullets.getFirstDead();\r\n            bullet.reset(this.x, this.y);\r\n\r\n            let shootAngleDeg = Phaser.Math.radToDeg( this.game.physics.arcade.moveToPointer(bullet, this.bulletSpeed) );\r\n            let shootInfo = {\r\n                angleDeg: shootAngleDeg,\r\n                speed: this.bulletSpeed,\r\n                x: parseInt(bullet.x),\r\n                y: parseInt(bullet.y)\r\n            };\r\n\r\n            GLOBAL.manager.broadcast({\r\n                type: 'shoot',\r\n                bullet: shootInfo\r\n            });\r\n        }\r\n    }\r\n\r\n    addKill(){\r\n        this.kills++;\r\n    }\r\n\r\n    addDamage(data, connectedPlayer){\r\n        this.health -= data.damage;\r\n        if(this.health <= 0){\r\n            this.gameOver(connectedPlayer);\r\n        }\r\n    }\r\n\r\n    gameOver(connectedPlayer){\r\n        console.log('killed by: ', connectedPlayer);\r\n        GLOBAL.manager.sendSingleData(connectedPlayer.peer, {\r\n            type: 'kill'\r\n        });\r\n        window.location.reload();\r\n    }\r\n\r\n    update(){\r\n        this.body.velocity.x = 0;\r\n        this.body.velocity.y = 0;\r\n\r\n        if(this.cursors.right.isDown || this.cursorsWSAD.right.isDown){\r\n            this.body.velocity.x += this.speed;\r\n            this.scale.x = -1;\r\n        } else if(this.cursors.left.isDown || this.cursorsWSAD.left.isDown){\r\n            this.body.velocity.x -= this.speed;\r\n            this.scale.x = 1;\r\n        }\r\n\r\n        if(this.cursors.down.isDown || this.cursorsWSAD.down.isDown){\r\n            this.body.velocity.y += this.speed;\r\n        } else if(this.cursors.up.isDown || this.cursorsWSAD.up.isDown){\r\n            this.body.velocity.y -= this.speed;\r\n        }\r\n\r\n        this.game.physics.arcade.collide(this.bullets, this.blockedLayer, (bullet) => {\r\n            bullet.kill();\r\n        });\r\n\r\n        this.onlineUpdate();\r\n    }\r\n\r\n    onlineUpdate(){\r\n        if(this.position.x != this.lastOnlinePosition.x || this.position.y != this.lastOnlinePosition.y){\r\n            GLOBAL.manager.broadcast({\r\n                type: 'position',\r\n                posX: parseInt(this.position.x),\r\n                posY: parseInt(this.position.y)\r\n            });\r\n\r\n            this.lastOnlinePosition = new Phaser.Point(this.position.x, this.position.y);\r\n        }\r\n    }\r\n}"]}